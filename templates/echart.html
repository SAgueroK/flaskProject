<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Awesome-pyecharts</title>
            <script type="text/javascript" src="https://assets.pyecharts.org/assets/v5/echarts.min.js"></script>
</head>

<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
<body >

    <h1 align="center">模型参数</h1>
			<table border="1" cellspacing="0" width="1000" height="200" align="center">
				<tr height="30">
					<td width="150">强化学习参数:</td>
					<td>
                        <table>
                            <tr height="30">
                                <td width="150" >训练频率:<input id="learn_factor" /></td>
                            </tr>
                            <tr height="30">
                                <td width="150">预存经验数据量:<input id="memory_warmup_size" /></td>
                            </tr>
                            <tr height="30">
                                <td width="150">从经验池取样数量:<input id="batch_size" /></td>
                            </tr>
                            <tr height="30">
                                <td width="150">学习率:<input id="learning_rate" /></td>
                            </tr>
                            <tr height="30">
                                <td width="150">衰减因子:<input id="gamma" /></td>
                            </tr>
                            <tr height="30">
                                <td width="150">探索值:<input id="observation" /></td>
                            </tr>
                        </tr>
                        </table>

					</td>
                    <td width="150">神经网络参数:</td>
					<td>
                        <table>
                            <tr height="30">
                                <td width="150">第一层的输出维数:<input id="hid1_size" /></td>
                            </tr>
                            <tr height="30">
                                <td width="150">第二层的输出维数:<input id="hid2_size" /></td>
                            </tr>
                            <tr height="30">
                                <td width="150">激活函数:<input id="functions" /></td>
                            </tr>
                            <tr height="30">
                                <td width="150">加载模型名称:<input id="load_name" /></td>
                            </tr>
                            <tr height="30">
                                <td width="150">保持模型名称:<input id="save_name" /></td>
                            </tr>
                        </tr>
                        </table>

					</td>
                </tr>
                <tr>
                    <td width="150">水果参数1:</td>
					<td width="">
                        <table>
                            <tr height="30">
                                <td width="150">葡萄:2</td>
                            </tr>
                            <tr height="30">
                                <td width="150">樱桃:4</td>
                            </tr>
                            <tr height="30">
                                <td width="150">橘子:8</td>
                            </tr>
                            <tr height="30">
                                <td width="150">柠檬:10</td>
                            </tr>
                            <tr height="30">
                                <td width="150">猕猴桃:15</td>
                            </tr>
                        </tr>
                        </table>

					</td>
                    <td width="150">水果参数2:</td>
					<td width="">
                        <table>
                            <tr height="30">
                                <td width="150">西红柿:20</td>
                            </tr>
                            <tr height="30">
                                <td width="150">杏子:36</td>
                            </tr>
                            <tr height="30">
                                <td width="150">菠萝:40</td>
                            </tr>
                            <tr height="30">
                                <td width="150">椰子:50</td>
                            </tr>
                            <tr height="30">
                                <td width="150">西瓜:100</td>
                            </tr>
                        </tr>
                        </table>

					</td>
                </tr>
			</table>
    <div id="290ff01ba41f498a805fab7c02c83067" class="chart-container" style="width:100%; height:600px;
    position: absolute;

"
    >

    <script>
        window.setInterval(function(){$.ajax(getTest())},1000);
        $(document).ready(function(){
            init()
        })
        function getTest(){

            $.ajax({
                type: 'GET',
                url: 'http://127.0.0.1:5000/get_rewards',
                dataType: 'json',
                crossDomain: true,
                success: function(res) {
                    let arr_x = [];
                    let arr_y = [];
                    for (let i = 0; i < res.length; i++) {
                      arr_x[i] = [res[i].time];
                      arr_y[i] = [res[i].time,res[i].rewards]
                    }
                    var chart_290ff01ba41f498a805fab7c02c83067 = echarts.init(
                        document.getElementById('290ff01ba41f498a805fab7c02c83067'), 'white', {renderer: 'canvas'});
                    var option_290ff01ba41f498a805fab7c02c83067 = {
                            "animation": true,
                            "animationThreshold": 2000,
                            "animationDuration": 1000,
                            "animationEasing": "cubicOut",
                            "animationDelay": 0,
                            "animationDurationUpdate": 300,
                            "animationEasingUpdate": "cubicOut",
                            "animationDelayUpdate": 0,
                            "aria": {
                                "enabled": false
                            },
                            "color": [
                                "#5470c6",
                                "#91cc75",
                                "#fac858",
                                "#ee6666",
                                "#73c0de",
                                "#3ba272",
                                "#fc8452",
                                "#9a60b4",
                                "#ea7ccc"
                            ],
                            "series": [
                                {
                                    "type": "line",
                                    "name": "\u5956\u52b1\u503c",
                                    "connectNulls": false,
                                    "xAxisIndex": 0,
                                    "symbolSize": 4,
                                    "showSymbol": true,
                                    "smooth": false,
                                    "clip": true,
                                    "step": false,
                                    "data": arr_y,
                                    "hoverAnimation": true,
                                    "label": {
                                        "show": true,
                                        "margin": 8
                                    },
                                    "logBase": 10,
                                    "lineStyle": {
                                        "show": true,
                                        "width": 1,
                                        "opacity": 1,
                                        "curveness": 0,
                                        "type": "solid"
                                    },
                                    "areaStyle": {
                                        "opacity": 0
                                    },
                                    "zlevel": 0,
                                    "z": 0
                                }
                            ],
                            "legend": [
                                {
                                    "data": [
                                        "\u5956\u52b1\u503c"
                                    ],
                                    "selected": {
                                        "\u5956\u52b1\u503c": true
                                    },
                                    "show": true,
                                    "padding": 5,
                                    "itemGap": 10,
                                    "itemWidth": 25,
                                    "itemHeight": 14,
                                    "backgroundColor": "transparent",
                                    "borderColor": "#ccc",
                                    "borderWidth": 1,
                                    "borderRadius": 0,
                                    "pageButtonItemGap": 5,
                                    "pageButtonPosition": "end",
                                    "pageFormatter": "{current}/{total}",
                                    "pageIconColor": "#2f4554",
                                    "pageIconInactiveColor": "#aaa",
                                    "pageIconSize": 15,
                                    "animationDurationUpdate": 800,
                                    "selector": false,
                                    "selectorPosition": "auto",
                                    "selectorItemGap": 7,
                                    "selectorButtonGap": 10
                                }
                            ],
                            "tooltip": {
                                "show": true,
                                "trigger": "item",
                                "triggerOn": "mousemove|click",
                                "axisPointer": {
                                    "type": "line"
                                },
                                "showContent": true,
                                "alwaysShowContent": false,
                                "showDelay": 0,
                                "hideDelay": 100,
                                "enterable": false,
                                "confine": false,
                                "appendToBody": false,
                                "transitionDuration": 0.4,
                                "textStyle": {
                                    "fontSize": 14
                                },
                                "borderWidth": 0,
                                "padding": 5,
                                "order": "seriesAsc"
                            },
                            "xAxis": [
                                {
                                    "show": true,
                                    "scale": false,
                                    "nameLocation": "end",
                                    "nameGap": 15,
                                    "gridIndex": 0,
                                    "inverse": false,
                                    "offset": 0,
                                    "splitNumber": 5,
                                    "minInterval": 0,
                                    "splitLine": {
                                        "show": true,
                                        "lineStyle": {
                                            "show": true,
                                            "width": 1,
                                            "opacity": 1,
                                            "curveness": 0,
                                            "type": "solid"
                                        }
                                    },
                                    "data": arr_x
                                }
                            ],
                            "yAxis": [
                                {
                                    "show": true,
                                    "scale": false,
                                    "nameLocation": "end",
                                    "nameGap": 15,
                                    "gridIndex": 0,
                                    "inverse": false,
                                    "offset": 0,
                                    "splitNumber": 5,
                                    "minInterval": 0,
                                    "splitLine": {
                                        "show": true,
                                        "lineStyle": {
                                            "show": true,
                                            "width": 1,
                                            "opacity": 1,
                                            "curveness": 0,
                                            "type": "solid"
                                        }
                                    }
                                }
                            ],
                            "title": [
                                {
                                    "show": true,
                                    "text": "\u6298\u7ebf\u56fe-\u5956\u52b1\u503c",
                                    "target": "blank",
                                    "subtarget": "blank",
                                    "padding": 5,
                                    "itemGap": 10,
                                    "textAlign": "auto",
                                    "textVerticalAlign": "auto",
                                    "triggerEvent": false
                                }
                            ]
                        };
                    chart_290ff01ba41f498a805fab7c02c83067.setOption(option_290ff01ba41f498a805fab7c02c83067);
                },
                error: function(){
                    console.log('error')
                }
            })
        }
    </script>
    </div>
<script>
    function GetQueryString(name)

        {

             let reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");

             let r = window.location.search.substr(1).match(reg);

             if(r!=null)return  unescape(r[2]); return null;

        }
    function init(){
        document.getElementById('learn_factor').value=GetQueryString("learn_factor")
        document.getElementById('memory_warmup_size').value=GetQueryString("memory_warmup_size")
        document.getElementById('batch_size').value=GetQueryString("batch_size")
        document.getElementById('learning_rate').value=GetQueryString("learning_rate")
        document.getElementById('gamma').value=GetQueryString("gamma")
        document.getElementById('observation').value=GetQueryString("observation")
        document.getElementById('hid1_size').value=GetQueryString("hid1_size")
        document.getElementById('hid2_size').value=GetQueryString("hid2_size")
        document.getElementById('functions').value=GetQueryString("functions")
        if(GetQueryString("load_name") !=null && GetQueryString("load_name").toString().length>1)
        {
           document.getElementById('load_name').value=GetQueryString("load_name")
        }else{
            document.getElementById('load_name').value="无"
        }

        document.getElementById('save_name').value=GetQueryString("save_name")
    }
</script>
</body>
</html>
